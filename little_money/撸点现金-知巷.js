/*
撸点现金-知巷(更新-去掉了阅读日志 增加了自动提现)

1.APP上项目不要相信
2.有问题自己查看APP规则说明或者问客服
3.自动提现需要绑定支付宝

http://a.juzipi597.com/index/user/wechatLogin?uid=39076

复制到微信打开注册(密码不要太复杂 或者带有#&等符号)

注册完 

ios       安装描述文件 

安卓       安装apk 

我的 我的服务  任务中心  
新用户绑定支付宝 2元到余额 (所有任务可做可不做)

自动提现需要绑定支付宝 未绑定会提示(提现金额固定10元)

注册手机号#注册密码 用#隔开 
定时     0 5-22 * * *
多账号@隔开


export zxlxjcookie=""

v2p，圈×
zxlxjcookie
*/


const $ = new Env('撸点现金-知巷');

let envSplitor=["@"],httpResult,httpReq,httpResp,userCookie=($.isNode()?process.env.zxlxjcookie:$.getdata("zxlxjcookie"))||"",userList=[],userIdx=0,userCount=0;class UserInfo{constructor(a){this.index=++userIdx,this.name=this.index,this.valid=!1;try{this.ck=a.split("#"),this.ckValid=!0}catch(b){}}async cashck(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/user/login","",`account=${this.ck[0]}&password=${this.ck[1]}`));let a=httpResult;this.msg=a.msg,this.nickname=a.data.userinfo.nickname,this.t=a.data.userinfo.token,console.log(`账号[${this.index}]`+this.msg+" \u7528\u6237 "+this.nickname),1==a.code&&await this.tx()}catch(b){}finally{return Promise.resolve(1)}}async tx(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/user/userInfo",`${this.t}`,""));let a=httpResult;this.cash=a.data.money,this.history_count=a.data.history_count,this.pp=a.data.mobile,this.activity=a.data.activity;var b=(b=this.pp).substr(0,3)+"****"+b.substr(7);console.log(`账号[${this.index}]手机 ${b} 活跃 ${this.activity} 余额${this.cash}`),await this.sign()}catch(c){console.log(c)}finally{return Promise.resolve(1)}}async changecheck(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/user/login","",`account=${this.ck[0]}&password=${this.ck[1]}`));let a=httpResult;this.msg=a.msg,this.nickname=a.data.userinfo.nickname,this.t=a.data.userinfo.token,1==a.code&&await this.check()}catch(b){}finally{return Promise.resolve(1)}}async check(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/user/userInfo",`${this.t}`,""));let a=httpResult;this.cash=a.data.money,this.history_count=a.data.history_count,this.pp=a.data.mobile,this.activity=a.data.activity;var b=(b=this.pp).substr(0,3)+"****"+b.substr(7);console.log(`账号[${this.index}]手机 ${b} 活跃${this.activity} 阅读${this.history_count} 余额${this.cash}`)}catch(c){}finally{return Promise.resolve(1)}}async draw(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/activity/drawPost",`${this.t}`,""));let a=httpResult;this.msg=a.msg,console.log(`账号[${this.index}]开始领取分红奖 ${this.msg}`),await this.bank()}catch(b){}finally{return Promise.resolve(1)}}async bank(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/user/bankData",`${this.t}`,""));let a=httpResult;if(a.data.name&&a.data.account!==a.data.name){this.tel=a.data.account;var c=this.tel.substr(0,3)+"****"+this.tel.substr(7);let b=a.data.name;var d=b.substr(0,1)+"**"+b.substr(2);console.log(`账号[${this.index}]已绑支付宝 ${d} -- ${c}`),this.cash>=10?await this.withPost():this.cash<10&&(this.change=10-this.cash,console.log(`账号[${this.index}]开始提现 距离提现 还需 ${this.change} 元 `))}else a.data.name==a.data.account&&(console.log(`账号[${this.index}]支付宝未绑定`),console.log(`账号[${this.index}]🔺你的绑定有异,绑定正确支付宝才可运行提现`))}catch(e){}finally{return Promise.resolve(1)}}async withPost(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/user/withPost",`${this.t}`,"amount=10"));let a=httpResult;this.msg=a.msg,console.log(`账号[${this.index}]开始提现10元 ${this.msg}`)}catch(b){}finally{return Promise.resolve(1)}}async sign(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/task/signPost",`${this.t}`,""));let a=httpResult;this.msg=a.msg,console.log(`账号[${this.index}]开始签到 ${this.msg}`),await this.draw()}catch(b){}finally{return Promise.resolve(1)}}async readlist(){try{console.log(`账号[${this.index}]开始保持在线阅读文章 (后台并行阅读 无日志)`);for(let a=1;a<=7;a++)await this.articleList(a)}catch(b){}finally{return Promise.resolve(1)}}async articleList(a){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/article/articleList",`${this.t}`,`type=${a}&page=1`));let b=httpResult.data.data;for(let c of b)this.id=c.id,await $.wait(Math.floor(2e3*Math.random())+1e3),await this.info()}catch(d){}finally{return Promise.resolve(1)}}async info(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/user/userInfo",`${this.t}`,""));let a=httpResult;this.hicount=a.data.history_count,await this.articleDetails()}catch(b){}finally{return Promise.resolve(1)}}async articleDetails(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/article/articleDetails",`${this.t}`,`id=${this.id}`));let a=httpResult;this.msg=a.data.details.title,await this.commonList()}catch(b){}finally{return Promise.resolve(1)}}async commonList(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/article/commonList",`${this.t}`,`id=${this.id}&page=1&sort=1`)),await this.conid()}catch(a){}finally{return Promise.resolve(1)}}async conid(){try{await httpRequest("post",populateUrlObject("http://a.juzipi597.com/api/content/contentBannerAd",`${this.t}`,`id=${this.id}&type=1`))}catch(a){}finally{return Promise.resolve(1)}}}async function GetRewrite(){}async function checkEnv(){if(userCookie){let a=envSplitor[0];for(let b of envSplitor)if(userCookie.indexOf(b)> -1){a=b;break}for(let c of userCookie.split(a))c&&userList.push(new UserInfo(c));userCount=userList.length}return console.log(`找到${userCount}个账号`),!0}function populateUrlObject(a,d,b=""){a.replace("//","/").split("/")[1];let c={url:a,headers:{Host:"a.juzipi597.com",token:d},timeout:5e3};return b&&(c.body=b),c}async function httpRequest(a,b){return httpResult=null,httpReq=null,httpResp=null,new Promise(c=>{$.send(a,b,async(b,d,a)=>{try{if(httpReq=d,httpResp=a,b);else if(a.body){if("object"==typeof a.body)httpResult=a.body;else try{httpResult=JSON.parse(a.body)}catch(f){httpResult=a.body}}}catch(e){console.log(e)}finally{c()}})})}function MD5Encrypt(m){function r(a,b){return a<<b|a>>>32-b}function k(d,e){var f,g,b,c,a;return b=2147483648&d,c=2147483648&e,f=1073741824&d,g=1073741824&e,a=(1073741823&d)+(1073741823&e),f&g?2147483648^a^b^c:f|g?1073741824&a?3221225472^a^b^c:1073741824^a^b^c:a^b^c}function g(a,b,d,e,f,g,h){var c;return a=k(a,k(k((c=b)&d| ~c&e,f),h)),k(r(a,g),b)}function h(a,b,f,g,h,i,j){var c,d,e;return a=k(a,k(k((c=b,d=f,c&(e=g)|d& ~e),h),j)),k(r(a,i),b)}function i(a,b,c,d,e,f,g){return a=k(a,k(k(b^c^d,e),g)),k(r(a,f),b)}function j(a,b,c,d,e,f,g){return a=k(a,k(k(c^(b| ~d),e),g)),k(r(a,f),b)}function l(d){var a,b="",c="";for(a=0;3>=a;a++)b+=(c="0"+(d>>>8*a&255).toString(16)).substr(c.length-2,2);return b}var e,n,o,p,q,a,b,c,d,f=[];for(f=function(g){for(var c,d=g.length,h=d+8,f=16*((h-h%64)/64+1),b=new Array(f-1),e=0,a=0;d>a;)c=(a-a%4)/4,e=a%4*8,b[c]=b[c]|g.charCodeAt(a)<<e,a++;return c=(a-a%4)/4,e=a%4*8,b[c]=b[c]|128<<e,b[f-2]=d<<3,b[f-1]=d>>>29,b}(m=function(c){c=c.replace(/\r\n/g,"\n");for(var b="",d=0;d<c.length;d++){var a=c.charCodeAt(d);128>a?b+=String.fromCharCode(a):a>127&&2048>a?(b+=String.fromCharCode(a>>6|192),b+=String.fromCharCode(63&a|128)):(b+=String.fromCharCode(a>>12|224),b+=String.fromCharCode(a>>6&63|128),b+=String.fromCharCode(63&a|128))}return b}(m)),a=1732584193,b=4023233417,c=2562383102,d=271733878,e=0;e<f.length;e+=16)n=a,o=b,p=c,q=d,a=g(a,b,c,d,f[e+0],7,3614090360),d=g(d,a,b,c,f[e+1],12,3905402710),c=g(c,d,a,b,f[e+2],17,606105819),b=g(b,c,d,a,f[e+3],22,3250441966),a=g(a,b,c,d,f[e+4],7,4118548399),d=g(d,a,b,c,f[e+5],12,1200080426),c=g(c,d,a,b,f[e+6],17,2821735955),b=g(b,c,d,a,f[e+7],22,4249261313),a=g(a,b,c,d,f[e+8],7,1770035416),d=g(d,a,b,c,f[e+9],12,2336552879),c=g(c,d,a,b,f[e+10],17,4294925233),b=g(b,c,d,a,f[e+11],22,2304563134),a=g(a,b,c,d,f[e+12],7,1804603682),d=g(d,a,b,c,f[e+13],12,4254626195),c=g(c,d,a,b,f[e+14],17,2792965006),b=g(b,c,d,a,f[e+15],22,1236535329),a=h(a,b,c,d,f[e+1],5,4129170786),d=h(d,a,b,c,f[e+6],9,3225465664),c=h(c,d,a,b,f[e+11],14,643717713),b=h(b,c,d,a,f[e+0],20,3921069994),a=h(a,b,c,d,f[e+5],5,3593408605),d=h(d,a,b,c,f[e+10],9,38016083),c=h(c,d,a,b,f[e+15],14,3634488961),b=h(b,c,d,a,f[e+4],20,3889429448),a=h(a,b,c,d,f[e+9],5,568446438),d=h(d,a,b,c,f[e+14],9,3275163606),c=h(c,d,a,b,f[e+3],14,4107603335),b=h(b,c,d,a,f[e+8],20,1163531501),a=h(a,b,c,d,f[e+13],5,2850285829),d=h(d,a,b,c,f[e+2],9,4243563512),c=h(c,d,a,b,f[e+7],14,1735328473),b=h(b,c,d,a,f[e+12],20,2368359562),a=i(a,b,c,d,f[e+5],4,4294588738),d=i(d,a,b,c,f[e+8],11,2272392833),c=i(c,d,a,b,f[e+11],16,1839030562),b=i(b,c,d,a,f[e+14],23,4259657740),a=i(a,b,c,d,f[e+1],4,2763975236),d=i(d,a,b,c,f[e+4],11,1272893353),c=i(c,d,a,b,f[e+7],16,4139469664),b=i(b,c,d,a,f[e+10],23,3200236656),a=i(a,b,c,d,f[e+13],4,681279174),d=i(d,a,b,c,f[e+0],11,3936430074),c=i(c,d,a,b,f[e+3],16,3572445317),b=i(b,c,d,a,f[e+6],23,76029189),a=i(a,b,c,d,f[e+9],4,3654602809),d=i(d,a,b,c,f[e+12],11,3873151461),c=i(c,d,a,b,f[e+15],16,530742520),b=i(b,c,d,a,f[e+2],23,3299628645),a=j(a,b,c,d,f[e+0],6,4096336452),d=j(d,a,b,c,f[e+7],10,1126891415),c=j(c,d,a,b,f[e+14],15,2878612391),b=j(b,c,d,a,f[e+5],21,4237533241),a=j(a,b,c,d,f[e+12],6,1700485571),d=j(d,a,b,c,f[e+3],10,2399980690),c=j(c,d,a,b,f[e+10],15,4293915773),b=j(b,c,d,a,f[e+1],21,2240044497),a=j(a,b,c,d,f[e+8],6,1873313359),d=j(d,a,b,c,f[e+15],10,4264355552),c=j(c,d,a,b,f[e+6],15,2734768916),b=j(b,c,d,a,f[e+13],21,1309151649),a=j(a,b,c,d,f[e+4],6,4149444226),d=j(d,a,b,c,f[e+11],10,3174756917),c=j(c,d,a,b,f[e+2],15,718787259),b=j(b,c,d,a,f[e+9],21,3951481745),a=k(a,n),b=k(b,o),c=k(c,p),d=k(d,q);return(l(a)+l(b)+l(c)+l(d)).toLowerCase()}function Env(a,b){return"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")> -1&&process.exit(0),new class{constructor(a,b){this.name=a,this.notifyStr="",this.startTime=(new Date).getTime(),Object.assign(this,b),console.log(`${this.name} 开始运行：
`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}getdata(b){let a=this.getval(b);if(/^@/.test(b)){let[,c,f]=/^@(.*?)\.(.*?)$/.exec(b),d=c?this.getval(c):"";if(d)try{let e=JSON.parse(d);a=e?this.lodash_get(e,f,""):a}catch(g){a=""}}return a}setdata(c,d){let a=!1;if(/^@/.test(d)){let[,b,e]=/^@(.*?)\.(.*?)$/.exec(d),f=this.getval(b),i=b?"null"===f?null:f||"{}":"{}";try{let g=JSON.parse(i);this.lodash_set(g,e,c),a=this.setval(JSON.stringify(g),b)}catch(j){let h={};this.lodash_set(h,e,c),a=this.setval(JSON.stringify(h),b)}}else a=this.setval(c,d);return a}getval(a){return this.isSurge()||this.isLoon()?$persistentStore.read(a):this.isQuanX()?$prefs.valueForKey(a):this.isNode()?(this.data=this.loaddata(),this.data[a]):this.data&&this.data[a]||null}setval(b,a){return this.isSurge()||this.isLoon()?$persistentStore.write(b,a):this.isQuanX()?$prefs.setValueForKey(b,a):this.isNode()?(this.data=this.loaddata(),this.data[a]=b,this.writedata(),!0):this.data&&this.data[a]||null}send(b,a,f=()=>{}){if("get"!=b&&"post"!=b&&"put"!=b&&"delete"!=b){console.log(`无效的http方法：${b}`);return}if("get"==b&&a.headers?(delete a.headers["Content-Type"],delete a.headers["Content-Length"]):a.body&&a.headers&&(a.headers["Content-Type"]||(a.headers["Content-Type"]="application/x-www-form-urlencoded")),this.isSurge()||this.isLoon()){this.isSurge()&&this.isNeedRewrite&&(a.headers=a.headers||{},Object.assign(a.headers,{"X-Surge-Skip-Scripting":!1}));let c={method:b,url:a.url,headers:a.headers,timeout:a.timeout,data:a.body};"get"==b&&delete c.data,$axios(c).then(a=>{let{status:b,request:c,headers:d,data:e}=a;f(null,c,{statusCode:b,headers:d,body:e})}).catch(a=>console.log(a))}else if(this.isQuanX())a.method=b.toUpperCase(),this.isNeedRewrite&&(a.opts=a.opts||{},Object.assign(a.opts,{hints:!1})),$task.fetch(a).then(a=>{let{statusCode:b,request:c,headers:d,body:e}=a;f(null,c,{statusCode:b,headers:d,body:e})},a=>f(a));else if(this.isNode()){this.got=this.got?this.got:require("got");let{url:d,...e}=a;this.instance=this.got.extend({followRedirect:!1}),this.instance[b](d,e).then(a=>{let{statusCode:b,request:c,headers:d,body:e}=a;f(null,c,{statusCode:b,headers:d,body:e})},b=>{let{message:c,response:a}=b;f(c,a,a&&a.body)})}}time(a){let b={"M+":(new Date).getMonth()+1,"d+":(new Date).getDate(),"h+":(new Date).getHours(),"m+":(new Date).getMinutes(),"s+":(new Date).getSeconds(),"q+":Math.floor(((new Date).getMonth()+3)/3),S:(new Date).getMilliseconds()};for(let c in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,((new Date).getFullYear()+"").substr(4-RegExp.$1.length))),b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a}async showmsg(){if(!this.notifyStr)return;let a=this.name+" \u8FD0\u884C\u901A\u77E5\n\n"+this.notifyStr;if($.isNode()){var b=require("./sendNotify");console.log("\n============== \u63A8\u9001 =============="),await b.sendNotify(this.name,a)}else this.msg(a)}logAndNotify(a){console.log(a),this.notifyStr+=a,this.notifyStr+="\n"}msg(d=t,a="",b="",e){let f=a=>{if(!a)return a;if("string"==typeof a)return this.isLoon()?a:this.isQuanX()?{"open-url":a}:this.isSurge()?{url:a}:void 0;if("object"==typeof a){if(this.isLoon()){let b=a.openUrl||a.url||a["open-url"],c=a.mediaUrl||a["media-url"];return{openUrl:b,mediaUrl:c}}if(this.isQuanX()){let d=a["open-url"]||a.url||a.openUrl,e=a["media-url"]||a.mediaUrl;return{"open-url":d,"media-url":e}}if(this.isSurge())return{url:a.url||a.openUrl||a["open-url"]}}};this.isMute||(this.isSurge()||this.isLoon()?$notification.post(d,a,b,f(e)):this.isQuanX()&&$notify(d,a,b,f(e)));let c=["","============== \u7CFB\u7EDF\u901A\u77E5 =============="];c.push(d),a&&c.push(a),b&&c.push(b),console.log(c.join("\n"))}getMin(a,b){return a<b?a:b}getMax(a,b){return a<b?b:a}padStr(e,b,f="0"){let a=String(e),g=b>a.length?b-a.length:0,c="";for(let d=0;d<g;d++)c+=f;return c+a}json2str(b,e,f=!1){let c=[];for(let d of Object.keys(b).sort()){let a=b[d];a&&f&&(a=encodeURIComponent(a)),c.push(d+"="+a)}return c.join(e)}str2json(e,f=!1){let d={};for(let a of e.split("#")){if(!a)continue;let b=a.indexOf("=");if(-1==b)continue;let g=a.substr(0,b),c=a.substr(b+1);f&&(c=decodeURIComponent(c)),d[g]=c}return d}randomString(d,a="abcdef0123456789"){let b="";for(let c=0;c<d;c++)b+=a.charAt(Math.floor(Math.random()*a.length));return b}randomList(a){let b=Math.floor(Math.random()*a.length);return a[b]}wait(a){return new Promise(b=>setTimeout(b,a))}done(a={}){let b=((new Date).getTime()-this.startTime)/1e3;console.log(`
${this.name} 运行结束，共运行了 ${b} 秒！`),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(a)}}(a,b)}(async()=>{if("undefined"!=typeof $request)await GetRewrite();else{if(!await checkEnv())return;if(userList.length>0){for(let a of(console.log("\n============= \u4EFB\u52A1\u67E5\u8BE2 =============\n"),taskall=[],userList))taskall.push(a.cashck());await Promise.all(taskall)}if(userList.length>0){for(let b of(console.log("\n============= \u4FDD\u6301\u5728\u7EBF =============\n"),taskall=[],userList))taskall.push(b.readlist());await Promise.all(taskall)}if(userList.length>0){for(let c of(console.log("\n============= \u7ED3\u675F\u67E5\u8BE2 =============\n"),taskall=[],userList))taskall.push(c.changecheck());await Promise.all(taskall)}await $.showmsg()}})().catch(a=>console.log(a)).finally(()=>$.done())